// Prisma schema for the recipe MVP

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Recipe {
  id               String        @id @default(uuid())
  title            String
  sourceUrl        String?
  ingredientsText  String
  instructionsText String
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  meals            MealRecipe[]
}

model Meal {
  id        String        @id @default(uuid())
  title     String
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  recipes   MealRecipe[]
}

model MealRecipe {
  id       String @id @default(uuid())
  mealId   String
  recipeId String
  meal     Meal   @relation(fields: [mealId], references: [id], onDelete: Cascade)
  recipe   Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@unique([mealId, recipeId])
}
